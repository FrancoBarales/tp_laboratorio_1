/*
 ============================================================================
 Name        : TP_1.c
 Author      : Franco Barales
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include "Biblioteca_TP1.h"

#define TRUE 1
#define FALSE 0

int main(void){
	setbuf(stdout, NULL);

	int flag1 = FALSE;
	int flag2 = FALSE;
	int flag3 = FALSE;
	float kilometros = 0;
	float precioAerolineas = 0;
	float precioAerolineasDebito, precioAerolineasCredito, precioAerolineasEnBitcoin, precioUnidadAerolineas;
	float precioLatam = 0;
	float precioLatamDebito, precioLatamCredito, precioLatamEnBitcoin, precioUnidadLatam;
	float diferencia = 0;
	char opcion;


	do{
		system('cls');
		printf("Menu de Opciones\n");
		printf("\n1) Ingresar kilometros");
		printf("\n2) Ingresar Precio de Vuelos");
		printf("\n3) Calcular todos los costos");
		printf("\n4) Informar Resultados");
		printf("\n5) Carga forzada de datos");
		printf("\n6) Salir");
		printf("\n\nElegir opcion: ");
		fflush(stdin);
		scanf("%c", &opcion);

		switch(opcion){
			case '1':
				getFloat(&kilometros, "\nIngresar cantidad de kilometros (100 o mas): ", "Error. Ingresar una cantidad valida de kilometros: ", 10000, 100, 5);
				flag1 = TRUE; // si se ingresaron correctamente los kilometros, se levanta la primera flag.
				break;
			case '2':
				getFloat(&precioAerolineas, "\nIngresar precio del pasaje de Aerolineas (entre $1.000.000 y $20.000): ", "Error. Ingresar un precio valido: ", 1000000, 20000, 5);
				getFloat(&precioLatam, "\nIngresar precio del pasaje de Latam (entre $1.000.000 y $20.000): ", "Error. Ingresar un precio valido: ", 1000000, 20000, 5);
				flag2 = TRUE; // si se ingresaron correctamente los precios, se levanta la segunda flag.
				break;
			case '3':
				if(flag1 == TRUE && flag2 == TRUE){
					precioAerolineasDebito = multiplicar(precioAerolineas, 0.9); // precio con Debito para Aerolineas
					precioAerolineasCredito = multiplicar( precioAerolineas, 1.25); // precio con Credito para Aerolineas
					precioAerolineasEnBitcoin = dividir(precioAerolineas, 4606954.55); // precio en Bitcoin para Aerolineas
					precioUnidadAerolineas = dividir(precioAerolineas, kilometros); // precio unitario de Aerolineas
					precioLatamDebito = multiplicar(precioLatam, 0.9); // precio con Debito para Latam
					precioLatamCredito = multiplicar(precioLatam, 1.25); // precio con Credito para Latam
					precioLatamEnBitcoin = dividir(precioLatam, 4606954.55); // precio en Bitcoin para Latam
					precioUnidadLatam = dividir(precioLatam, kilometros); // precio unitario Latam
					diferencia = calcularDiferencia(precioLatam, precioAerolineas); // diferencia de precio entre pasajes de Aerolineas y Latam
					flag3 = TRUE;
				}
				else if(flag1 == TRUE && flag2 == FALSE){ // si no se ingresaron correctamente los precios, aparece el siguiente mensaje de error.
					printf("ERROR: Faltan ingresar los precios de los vuelos.\n");
				}
				else if(flag1 == FALSE && flag2 == TRUE){ // si no se ingresaron correctamente los kilometros, aparece el siguiente mensaje de error.
					printf("ERROR: Faltan ingresar los kilometros.\n");
				}
				else{ // si precios y kilometros se ingresaron incorrectamente, aparece el siguiente mensaje de error.
					printf("ERROR: Faltan ingresar los kilometros y los precios de los vuelos.\n");
				}
				printf("Calculos Realizados.\n");
				system("pause");
				break;
			case '4':
				if(flag3 == TRUE){
					printf("\nKMs Ingresados: %.2f km\n", kilometros);
					mostrarAerolineas(precioAerolineas, precioAerolineasDebito, precioAerolineasCredito, precioAerolineasEnBitcoin, precioUnidadAerolineas);
					mostrarLatam(precioLatam, precioLatamDebito, precioLatamCredito, precioLatamEnBitcoin, precioUnidadLatam);
					printf("\n\nLa diferencia de precio es : %.2f\n\n", diferencia);

				}
				else if(flag3 == FALSE){
					printf("ERROR: No estan calculados los costos (Opcion 3).\n");
				}
				else if(flag1 == FALSE || flag2 == FALSE){
					printf("ERROR: No estan ingresados todos los datos necesarios (Opcion 1 y 2 / Opcion 5).\n");
				}
				system("pause");
				break;
			case '5':
				kilometros = 7090;
				flag1 = TRUE;
				precioAerolineas= 162965;
				precioLatam = 159339;
				flag2 = TRUE;
				printf("Carga forzada de datos completada.\n");
				system("pause");
				break;
		}
	}while(opcion != '6');

	return EXIT_SUCCESS;
}


























