/*
 ============================================================================
 Name        : TP_1.c
 Author      : Franco Barales
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include "Biblioteca_TP1.h"

#define TRUE 1
#define FALSE 0

int main(void){
	setbuf(stdout, NULL);

	int flag1 = FALSE;
	int flag2 = FALSE;
	float kilometros = 0;
	float precioAerolineas = 0;
	float precioAerolineasDebito, precioAerolineasCredito, precioAerolineasEnBitcoin, precioUnidadAerolineas;
	float precioLatam = 0;
	float precioLatamDebito, precioLatamCredito, precioLatamEnBitcoin, precioUnidadLatam;
	float diferencia = 0;
	char opcion;


	do{
		printf("Menu de Opciones\n");
		printf("\n1) Ingresar kilometros");
		printf("\n2) Ingresar Precio de Vuelos");
		printf("\n3) Calcular todos los costos");
		printf("\n4) Informar Resultados");
		printf("\n5) Carga forzada de datos");
		printf("\n6) Salir");
		printf("\n\nElegir opcion: ");
		fflush(stdin);
		scanf("%c", &opcion);

		switch(opcion){
			case '1':
				getFloat(&kilometros, "\nIngresar cantidad de kilometros (100 o mas): ", "Error. Ingresar una cantidad valida de kilometros: ", 10000, 100, 5);
				flag1 = TRUE; // si se ingresaron correctamente los kilometros, se levanta la primera flag.
				break;
			case '2':
				getFloat(&precioAerolineas, "\nIngresar precio del pasaje de Aerolineas (entre $1.000.000 y $20.000): ", "Error. Ingresar un precio valido: ", 1000000, 20000, 5);
				getFloat(&precioLatam, "\nIngresar precio del pasaje de Latam (entre $1.000.000 y $20.000): ", "Error. Ingresar un precio valido: ", 1000000, 20000, 5);
				flag2 = TRUE; // si se ingresaron correctamente los precios, se levanta la segunda flag.
				break;
			case '3':
				if(flag1 == TRUE && flag2 == TRUE){
					calcularCostos(&precioAerolineasDebito, precioAerolineas, 0.9); // precio con Debito para Aerolineas
					calcularCostos(&precioAerolineasCredito, precioAerolineas, 1.25); // precio con Credito para Aerolineas
					dividir(&precioAerolineasEnBitcoin, precioAerolineas, 4606954.55); // precio en Bitcoin para Aerolineas
					dividir(&precioUnidadAerolineas, precioAerolineas, kilometros); // precio unitario de Aerolineas
					calcularCostos(&precioLatamDebito, precioLatam, 0.9); // precio con Debito para Latam
					calcularCostos(&precioLatamCredito, precioLatam, 1.25); // precio con Credito para Latam
					dividir(&precioLatamEnBitcoin, precioLatam, 4606954.55); // precio en Bitcoin para Latam
					dividir(&precioUnidadLatam, precioLatam, kilometros); // precio unitario Latam
					calcularDiferencia(&diferencia, precioLatam, precioAerolineas); // diferencia de precio entre pasajes de Aerolineas y Latam
				}
				else if(flag1 == TRUE && flag2 == FALSE){ // si no se ingresaron correctamente los precios, aparece el siguiente mensaje de error.
					printf("ERROR: Faltan ingresar los precios de los vuelos.");
				}
				else if(flag1 == FALSE && flag2 == TRUE){ // si no se ingresaron correctamente los kilometros, aparece el siguiente mensaje de error.
					printf("ERROR: Faltan ingresar los kilometros.");
				}
				else{ // si precios y kilometros se ingresaron incorrectamente, aparece el siguiente mensaje de error.
					printf("ERROR: Faltan ingresar los kilometros y los precios de los vuelos.");
				}
				printf("Calculos Realizados.");
				system("pause");
				break;
			case '4':
				printf("\nKMs Ingresados: %.2f km\n\n", kilometros);
				mostrarAerolineas(precioAerolineas, precioAerolineasDebito, precioAerolineasCredito, precioAerolineasEnBitcoin, precioUnidadAerolineas);
				mostrarLatam(precioLatam, precioLatamDebito, precioLatamCredito, precioLatamEnBitcoin, precioUnidadLatam);
				printf("\n\nLa diferencia de precio es : %.2f", diferencia);
				system("pause");
				break;
			case '5':
				kilometros = 7090;
				flag1 == TRUE;
				precioAerolineas= 162965;
				precioLatam = 159339;
				flag2 == TRUE;
				printf("Carga forzada de datos completada.\n");
				system("pause");
				break;
		}
	}while(opcion != '6');

	return EXIT_SUCCESS;
}


























